{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SocketPolyfill = void 0;\n\nvar events_1 = require(\"events\");\n\nvar SocketPolyfill =\n/** @class */\nfunction (_super) {\n  __extends(SocketPolyfill, _super);\n\n  function SocketPolyfill(options, socketOptions) {\n    var _this = _super.call(this) || this;\n\n    if (socketOptions.usesHttps) {\n      _this.authorized = true;\n    }\n\n    _this.bufferSize = 0;\n    _this.writableLength = 0;\n    _this.writable = true;\n    _this.readable = true;\n    _this.pending = false;\n    _this.destroyed = false;\n    _this.connecting = false;\n    _this.totalDelayMs = 0;\n    _this.timeoutMs = null;\n    var ipv6 = options.family === 6;\n    _this.remoteFamily = ipv6 ? 'IPv6' : 'IPv4';\n    _this.localAddress = _this.remoteAddress = ipv6 ? '::1' : '127.0.0.1';\n    _this.localPort = _this.remotePort = _this.resolvePort(options.port);\n    return _this;\n  }\n\n  SocketPolyfill.prototype.resolvePort = function (port) {\n    if (port == null) {\n      return 0;\n    }\n\n    if (typeof port === 'number') {\n      return port;\n    }\n\n    return parseInt(port);\n  };\n\n  SocketPolyfill.prototype.address = function () {\n    return {\n      port: this.remotePort,\n      family: this.remoteFamily,\n      address: this.remoteAddress\n    };\n  };\n\n  SocketPolyfill.prototype.applyDelay = function (duration) {\n    this.totalDelayMs += duration;\n\n    if (this.timeoutMs && this.totalDelayMs > this.timeoutMs) {\n      this.emit('timeout');\n    }\n  };\n  /**\n   * Enable/disable the use of Nagle's algorithm.\n   * Nagle's algorithm delays data before it is sent via the network.\n   */\n\n\n  SocketPolyfill.prototype.setNoDelay = function (noDelay) {\n    if (noDelay === void 0) {\n      noDelay = true;\n    }\n\n    if (noDelay) {\n      this.totalDelayMs = 0;\n    }\n\n    return this;\n  };\n  /**\n   * Enable/disable keep-alive functionality, and optionally set the initial delay before\n   * the first keepalive probe is sent on an idle socket.\n   */\n\n\n  SocketPolyfill.prototype.setKeepAlive = function () {\n    return this;\n  };\n\n  SocketPolyfill.prototype.setTimeout = function (timeout, callback) {\n    var _this = this;\n\n    setTimeout(function () {\n      callback === null || callback === void 0 ? void 0 : callback();\n\n      _this.emit('timeout');\n    }, timeout);\n    return this;\n  };\n\n  SocketPolyfill.prototype.getPeerCertificate = function () {\n    return Buffer.from((Math.random() * 10000 + Date.now()).toString()).toString('base64');\n  }; // Mock methods required to write to the response body.\n\n\n  SocketPolyfill.prototype.pause = function () {\n    return this;\n  };\n\n  SocketPolyfill.prototype.resume = function () {\n    return this;\n  };\n\n  SocketPolyfill.prototype.cork = function () {};\n\n  SocketPolyfill.prototype.uncork = function () {};\n\n  SocketPolyfill.prototype.destroy = function (error) {\n    this.destroyed = true;\n    this.readable = this.writable = false;\n\n    if (error) {\n      this.emit('error', error);\n    }\n\n    return this;\n  };\n\n  return SocketPolyfill;\n}(events_1.EventEmitter);\n\nexports.SocketPolyfill = SocketPolyfill;","map":{"version":3,"sources":["../../../../src/interceptors/ClientRequest/polyfills/SocketPolyfill.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SocketPolyfill = void 0;\nvar events_1 = require(\"events\");\nvar SocketPolyfill = /** @class */ (function (_super) {\n    __extends(SocketPolyfill, _super);\n    function SocketPolyfill(options, socketOptions) {\n        var _this = _super.call(this) || this;\n        if (socketOptions.usesHttps) {\n            _this.authorized = true;\n        }\n        _this.bufferSize = 0;\n        _this.writableLength = 0;\n        _this.writable = true;\n        _this.readable = true;\n        _this.pending = false;\n        _this.destroyed = false;\n        _this.connecting = false;\n        _this.totalDelayMs = 0;\n        _this.timeoutMs = null;\n        var ipv6 = options.family === 6;\n        _this.remoteFamily = ipv6 ? 'IPv6' : 'IPv4';\n        _this.localAddress = _this.remoteAddress = ipv6 ? '::1' : '127.0.0.1';\n        _this.localPort = _this.remotePort = _this.resolvePort(options.port);\n        return _this;\n    }\n    SocketPolyfill.prototype.resolvePort = function (port) {\n        if (port == null) {\n            return 0;\n        }\n        if (typeof port === 'number') {\n            return port;\n        }\n        return parseInt(port);\n    };\n    SocketPolyfill.prototype.address = function () {\n        return {\n            port: this.remotePort,\n            family: this.remoteFamily,\n            address: this.remoteAddress,\n        };\n    };\n    SocketPolyfill.prototype.applyDelay = function (duration) {\n        this.totalDelayMs += duration;\n        if (this.timeoutMs && this.totalDelayMs > this.timeoutMs) {\n            this.emit('timeout');\n        }\n    };\n    /**\n     * Enable/disable the use of Nagle's algorithm.\n     * Nagle's algorithm delays data before it is sent via the network.\n     */\n    SocketPolyfill.prototype.setNoDelay = function (noDelay) {\n        if (noDelay === void 0) { noDelay = true; }\n        if (noDelay) {\n            this.totalDelayMs = 0;\n        }\n        return this;\n    };\n    /**\n     * Enable/disable keep-alive functionality, and optionally set the initial delay before\n     * the first keepalive probe is sent on an idle socket.\n     */\n    SocketPolyfill.prototype.setKeepAlive = function () {\n        return this;\n    };\n    SocketPolyfill.prototype.setTimeout = function (timeout, callback) {\n        var _this = this;\n        setTimeout(function () {\n            callback === null || callback === void 0 ? void 0 : callback();\n            _this.emit('timeout');\n        }, timeout);\n        return this;\n    };\n    SocketPolyfill.prototype.getPeerCertificate = function () {\n        return Buffer.from((Math.random() * 10000 + Date.now()).toString()).toString('base64');\n    };\n    // Mock methods required to write to the response body.\n    SocketPolyfill.prototype.pause = function () {\n        return this;\n    };\n    SocketPolyfill.prototype.resume = function () {\n        return this;\n    };\n    SocketPolyfill.prototype.cork = function () { };\n    SocketPolyfill.prototype.uncork = function () { };\n    SocketPolyfill.prototype.destroy = function (error) {\n        this.destroyed = true;\n        this.readable = this.writable = false;\n        if (error) {\n            this.emit('error', error);\n        }\n        return this;\n    };\n    return SocketPolyfill;\n}(events_1.EventEmitter));\nexports.SocketPolyfill = SocketPolyfill;\n//# sourceMappingURL=SocketPolyfill.js.map"]},"metadata":{},"sourceType":"script"}